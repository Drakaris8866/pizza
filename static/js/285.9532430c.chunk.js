(self.webpackChunkpizza=self.webpackChunkpizza||[]).push([[285],{7255:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(2982),c=t(8683),i=t(2791),a=t(8175),s=t(3329),o=function(){return(0,s.jsxs)(a.ZP,{speed:2,width:280,height:450,viewBox:"0 0 280 450",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",className:"pizza-block",children:[(0,s.jsx)("circle",{cx:"120",cy:"120",r:"120"}),(0,s.jsx)("rect",{x:"0",y:"250",rx:"0",ry:"0",width:"280",height:"20"}),(0,s.jsx)("rect",{x:"0",y:"280",rx:"0",ry:"0",width:"280",height:"80"}),(0,s.jsx)("rect",{x:"0",y:"374",rx:"0",ry:"0",width:"90",height:"64"}),(0,s.jsx)("rect",{x:"98",y:"374",rx:"0",ry:"0",width:"184",height:"64"})]})},l=t(6048),u=t.n(l),d="pagination_root__y93YH",h=function(e){var n=e.currentPage,t=e.onChangePage;return(0,s.jsx)(u(),{className:d,breakLabel:"...",nextLabel:">",onPageChange:function(e){return t(e.selected+1)},pageRangeDisplayed:4,pageCount:3,forcePage:n-1,previousLabel:"<"})},f=t(9434),x=t(2808),g=t.n(x),m=t(7689),v=t(7295),p=t(6844),j=t(3133),C=function(e){var n=e.activeCategory,t=e.onChangeCategory;return(0,s.jsx)("div",{className:"categories",children:(0,s.jsx)("ul",{children:["\u0412\u0441\u0435","\u041c\u044f\u0441\u043d\u044b\u0435","\u0412\u0435\u0433\u0435\u0442\u0430\u0440\u0438\u0430\u043d\u0441\u043a\u0430\u044f","\u0413\u0440\u0438\u043b\u044c","\u041e\u0441\u0442\u0440\u044b\u0435","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435"].map((function(e,r){return(0,s.jsx)("li",{onClick:function(){return t(r)},className:n===r?"active":"",children:e},r+e)}))})})},y=i.memo(C),w=t(885),z=function(e){var n=e.sortBy,t=e.onChangeSortBy,r=i.useState(!1),c=(0,w.Z)(r,2),a=c[0],o=c[1],l=i.useRef(null),u=["\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438","\u0446\u0435\u043d\u0435","\u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443"];function d(e){var n=e;l.current&&!n.path.includes(l.current)&&o(!1)}return i.useEffect((function(){return document.body.addEventListener("click",(function(e){d(e)})),function(){document.body.removeEventListener("click",(function(e){d(e)}))}}),[]),(0,s.jsxs)("div",{ref:l,className:"sort",children:[(0,s.jsxs)("div",{onClick:function(){return o(!a)},className:"sort__label",children:[(0,s.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"".concat(a?"active":""),children:(0,s.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})}),(0,s.jsx)("b",{children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e:"}),(0,s.jsx)("span",{children:u[n]})]}),(0,s.jsx)("div",{className:"sort__popup ".concat(a&&"_active"),children:(0,s.jsx)("ul",{children:u.map((function(e,r){return(0,s.jsx)("li",{className:"".concat(n===r&&"active"),onClick:function(){return function(e){t(e),o(!1)}(r)},children:e},r)}))})})]})},b=i.memo(z),N=t(6696),_=t(1087),k=function(e){var n=e.id,t=e.title,r=e.imageUrl,c=e.price,a=e.sizes,o=e.types,l=(0,i.useState)(0),u=(0,w.Z)(l,2),d=u[0],h=u[1],x=(0,i.useState)(0),g=(0,w.Z)(x,2),m=g[0],p=g[1],j=(0,v.TL)(),C=["\u0442\u043e\u043d\u043a\u043e\u0435","\u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0435"],y=[26,30,40][m],z=C[d],b=(0,f.v9)((function(e){return e.cart.items.find((function(e){return e.id===n}))})),k=b?b.count:0;return(0,s.jsxs)("div",{className:"pizza-block",children:[(0,s.jsx)(_.rU,{to:"pizza/".concat(n),children:(0,s.jsx)("img",{className:"pizza-block__image",src:r,alt:"Pizza"})}),(0,s.jsx)("h4",{className:"pizza-block__title",children:t}),(0,s.jsxs)("div",{className:"pizza-block__selector",children:[(0,s.jsx)("ul",{children:o.map((function(e,n){return(0,s.jsx)("li",{className:d===n?"active":"",onClick:function(){return h(n)},children:C[Number(e)]},n)}))}),(0,s.jsx)("ul",{children:a.map((function(e,n){return(0,s.jsx)("li",{className:m===n?"active":"",onClick:function(){return p(n)},children:e},e)}))})]}),(0,s.jsxs)("div",{className:"pizza-block__bottom",children:[(0,s.jsxs)("div",{className:"pizza-block__price",children:["\u043e\u0442 ",c," \u20bd"]}),(0,s.jsxs)("div",{onClick:function(){var e={id:n,title:t,imageUrl:r,price:c,currentType:z,currentSize:y,count:0};j((0,N.jX)(e))},className:"button button--outline button--add",children:[(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z",fill:"white"})}),(0,s.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,s.jsx)("i",{children:k})]})]})]})},B=i.memo(k),L=function(){var e=(0,v.TL)(),n=(0,m.s0)(),t=i.useRef(!1),a=i.useRef(!1),l=(0,f.v9)((function(e){return e.pizzas})),u=l.items,d=l.statusOfLoading,x=(0,f.v9)((function(e){return e.filter})),C=x.activeCategory,w=x.sortBy,z=x.currentPage,N=(0,f.v9)((function(e){return e.search})).searchInputValue;i.useEffect((function(){if(window.location.search){var n=g().parse(window.location.search.substring(1));e((0,p.rr)((0,c.Z)({},n))),t.current=!0}}),[]),i.useEffect((function(){t.current||_(),t.current=!1}),[C,w,N,z]),i.useEffect((function(){if(a.current){var e=g().stringify({activeCategory:C,sortBy:w,currentPage:z});n("?".concat(e))}a.current=!0}),[C,w,N,z]);var _=function(){var n={sortCategory:0===C?"category":"category=".concat(C),search:N?N.toLowerCase():"",pagination:0===C?"page=".concat(z,"&limit=4&"):"",fetchSelectedSortBy:function(){return 0===w?"sortBy=rating&order=desc":1===w?"sortBy=price&order=desc":"sortBy=title&order=desc"},searchInputValue:N};e((0,j.q)(n))};return(0,s.jsx)("div",{className:"content",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"content__top",children:[(0,s.jsx)(y,{onChangeCategory:function(n){e((0,p.PR)(n))},activeCategory:C}),(0,s.jsx)(b,{onChangeSortBy:function(n){e((0,p.zR)(n))},sortBy:w})]}),(0,s.jsx)("h2",{className:"content__title",children:"\u0412\u0441\u0435 \u043f\u0438\u0446\u0446\u044b"}),(0,s.jsx)("div",{className:"content__items",children:"loading"!==d?u.map((function(e,n){return(0,s.jsx)(B,(0,c.Z)({},e),n+e.title)})):(0,r.Z)(new Array(10)).map((function(e,n){return(0,s.jsx)(o,{},n)}))}),(0,s.jsx)(h,{currentPage:z,onChangePage:function(n){e((0,p.D4)(n))}})]})})}},4654:function(){}}]);
//# sourceMappingURL=285.9532430c.chunk.js.map